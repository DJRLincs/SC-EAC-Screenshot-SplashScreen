"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const stream_1 = require("stream");
class RangeWritableStream extends stream_1.Writable {
    fileHandle;
    rangeStartPosition;
    offset;
    constructor(options) {
        super(options);
        this.fileHandle = options.fileHandle;
        this.rangeStartPosition = options.rangeStartPosition;
        this.offset = 0;
    }
    async _write(chunk, encoding, callback) {
        try {
            const { bytesWritten } = await this.fileHandle.write(chunk, 0, chunk.length, this.rangeStartPosition + this.offset);
            this.offset += bytesWritten;
            this.emit('data-written', this.offset);
            callback();
        }
        catch (error) {
            callback(error);
        }
    }
}
exports.default = RangeWritableStream;
//# sourceMappingURL=rangeWritableStream.js.map